{"ast":null,"code":"/*\n ** © 2020 by Philipp Dunkel, Ben Noordhuis, Elan Shankar, Paul Miller\n ** Licensed under MIT License.\n */\n\n/* jshint node:true */\n\"use strict\";\n\nif (process.platform !== \"darwin\") {\n  throw new Error(`Module 'fsevents' is not compatible with platform '${process.platform}'`);\n}\n\nconst Native = require(\"./fsevents.node\");\n\nconst events = Native.constants;\n\nfunction watch(path, since, handler) {\n  if (typeof path !== \"string\") {\n    throw new TypeError(`fsevents argument 1 must be a string and not a ${typeof path}`);\n  }\n\n  if (\"function\" === typeof since && \"undefined\" === typeof handler) {\n    handler = since;\n    since = Native.flags.SinceNow;\n  }\n\n  if (typeof since !== \"number\") {\n    throw new TypeError(`fsevents argument 2 must be a number and not a ${typeof since}`);\n  }\n\n  if (typeof handler !== \"function\") {\n    throw new TypeError(`fsevents argument 3 must be a function and not a ${typeof handler}`);\n  }\n\n  let instance = Native.start(Native.global, path, since, handler);\n  if (!instance) throw new Error(`could not watch: ${path}`);\n  return () => {\n    const result = instance ? Promise.resolve(instance).then(Native.stop) : Promise.resolve(undefined);\n    instance = undefined;\n    return result;\n  };\n}\n\nfunction getInfo(path, flags) {\n  return {\n    path,\n    flags,\n    event: getEventType(flags),\n    type: getFileType(flags),\n    changes: getFileChanges(flags)\n  };\n}\n\nfunction getFileType(flags) {\n  if (events.ItemIsFile & flags) return \"file\";\n  if (events.ItemIsDir & flags) return \"directory\";\n  if (events.ItemIsSymlink & flags) return \"symlink\";\n}\n\nfunction anyIsTrue(obj) {\n  for (let key in obj) {\n    if (obj[key]) return true;\n  }\n\n  return false;\n}\n\nfunction getEventType(flags) {\n  if (events.ItemRemoved & flags) return \"deleted\";\n  if (events.ItemRenamed & flags) return \"moved\";\n  if (events.ItemCreated & flags) return \"created\";\n  if (events.ItemModified & flags) return \"modified\";\n  if (events.RootChanged & flags) return \"root-changed\";\n  if (events.ItemCloned & flags) return \"cloned\";\n  if (anyIsTrue(flags)) return \"modified\";\n  return \"unknown\";\n}\n\nfunction getFileChanges(flags) {\n  return {\n    inode: !!(events.ItemInodeMetaMod & flags),\n    finder: !!(events.ItemFinderInfoMod & flags),\n    access: !!(events.ItemChangeOwner & flags),\n    xattrs: !!(events.ItemXattrMod & flags)\n  };\n}\n\nexports.watch = watch;\nexports.getInfo = getInfo;\nexports.constants = events;","map":{"version":3,"sources":["/Users/jordanthomson/code/blog-with-Node-React/node_modules/fsevents/fsevents.js"],"names":["process","platform","Error","Native","require","events","constants","watch","path","since","handler","TypeError","flags","SinceNow","instance","start","global","result","Promise","resolve","then","stop","undefined","getInfo","event","getEventType","type","getFileType","changes","getFileChanges","ItemIsFile","ItemIsDir","ItemIsSymlink","anyIsTrue","obj","key","ItemRemoved","ItemRenamed","ItemCreated","ItemModified","RootChanged","ItemCloned","inode","ItemInodeMetaMod","finder","ItemFinderInfoMod","access","ItemChangeOwner","xattrs","ItemXattrMod","exports"],"mappings":"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","sourcesContent":["/*\n ** © 2020 by Philipp Dunkel, Ben Noordhuis, Elan Shankar, Paul Miller\n ** Licensed under MIT License.\n */\n\n/* jshint node:true */\n\"use strict\";\n\nif (process.platform !== \"darwin\") {\n  throw new Error(`Module 'fsevents' is not compatible with platform '${process.platform}'`);\n}\n\nconst Native = require(\"./fsevents.node\");\nconst events = Native.constants;\n\nfunction watch(path, since, handler) {\n  if (typeof path !== \"string\") {\n    throw new TypeError(`fsevents argument 1 must be a string and not a ${typeof path}`);\n  }\n  if (\"function\" === typeof since && \"undefined\" === typeof handler) {\n    handler = since;\n    since = Native.flags.SinceNow;\n  }\n  if (typeof since !== \"number\") {\n    throw new TypeError(`fsevents argument 2 must be a number and not a ${typeof since}`);\n  }\n  if (typeof handler !== \"function\") {\n    throw new TypeError(`fsevents argument 3 must be a function and not a ${typeof handler}`);\n  }\n\n  let instance = Native.start(Native.global, path, since, handler);\n  if (!instance) throw new Error(`could not watch: ${path}`);\n  return () => {\n    const result = instance ? Promise.resolve(instance).then(Native.stop) : Promise.resolve(undefined);\n    instance = undefined;\n    return result;\n  };\n}\n\nfunction getInfo(path, flags) {\n  return {\n    path,\n    flags,\n    event: getEventType(flags),\n    type: getFileType(flags),\n    changes: getFileChanges(flags),\n  };\n}\n\nfunction getFileType(flags) {\n  if (events.ItemIsFile & flags) return \"file\";\n  if (events.ItemIsDir & flags) return \"directory\";\n  if (events.ItemIsSymlink & flags) return \"symlink\";\n}\nfunction anyIsTrue(obj) {\n  for (let key in obj) {\n    if (obj[key]) return true;\n  }\n  return false;\n}\nfunction getEventType(flags) {\n  if (events.ItemRemoved & flags) return \"deleted\";\n  if (events.ItemRenamed & flags) return \"moved\";\n  if (events.ItemCreated & flags) return \"created\";\n  if (events.ItemModified & flags) return \"modified\";\n  if (events.RootChanged & flags) return \"root-changed\";\n  if (events.ItemCloned & flags) return \"cloned\";\n  if (anyIsTrue(flags)) return \"modified\";\n  return \"unknown\";\n}\nfunction getFileChanges(flags) {\n  return {\n    inode: !!(events.ItemInodeMetaMod & flags),\n    finder: !!(events.ItemFinderInfoMod & flags),\n    access: !!(events.ItemChangeOwner & flags),\n    xattrs: !!(events.ItemXattrMod & flags),\n  };\n}\n\nexports.watch = watch;\nexports.getInfo = getInfo;\nexports.constants = events;\n"]},"metadata":{},"sourceType":"script"}